<!DOCTYPE html>


<html>
    <head>
        <style>

            @font-face {
                font-family: "Comic Sans";
                src: url("Comic\ Sans\ MS.ttf");
            }

            @keyframes RainbowAnim {
                0% { color: #ff0000; }
                16% { color: #ff7f00; }
                33% { color: #ffff00; }
                50% { color: #00ff00; }
                66% { color: #0000ff; }
                83% { color: #4b0082; }
                100% { color: #8f00ff; }
            }
            @keyframes TitleAnim {
                0% {transform: translateY(0);}
                50% {transform: translateY(-14px);}
            }
            @keyframes OperatorSpin {
                0% {transform: rotate(-10deg);}
                100% {transform: rotate(10deg);}
            }
            @keyframes ResultAnim {
                8% {transform: translateX(-30px) rotate(-5deg);}
            }
            @keyframes ResultAnimRight {
                8% {transform: translateX(30px) rotate(5deg);}
            }


            h1 {
                text-align: center;
                font-family: "Comic Sans";
            }
            p {
                font-family: "Comic Sans";
            }
            button {
                font-family: "Comic Sans";
                font-size: 24px;
                border-radius: 10px;
                border-style: solid;
                border-color: lightgray;
                background-color: white;
                padding: 10px;
            }
            .CalcButton {
                width: 200px;
            }
            .Shake {
                animation: shake 0.5s ease-in-out;
            }
            textarea {
                font-family: "Comic Sans";
                resize: none;
                width: 100px;
                height: 100px;
                font-size: 71px;
                border-radius: 10px;
                border-style: solid;
                text-align: center;
                border-color: lightgray;
                white-space: nowrap;
            }
            .TextAreas {
                text-align: center;
                display: flex;
                justify-content: center;
                
            }
            .Num1anim {
                animation: ResultAnim 1s 1 linear;
            }
            .Num2anim {
                animation: ResultAnimRight 1s 1 linear;
            }
            .OperatorArea {
                text-align: center;
                display: flex;
                justify-content: center;
            }

            .title span {
                justify-content: center;
                display: inline-block;
                animation-name: RainbowAnim, TitleAnim;
                animation-duration: 3s, 1.6s;
                animation-iteration-count: infinite, infinite;
                animation-timing-function: ease-in-out, ease-in-out;
                animation-direction: normal, normal;
                animation-delay: calc(0.08s * var(--i));
                font-size: 50px;

            }
            .Operator {
                font-size: 36px;
                margin: 20px;
                display: flex;
                width: 60px;
                height: 60px;
                text-align: center;
                font-family: "Comic Sans";
                appearance: none;
                justify-content: center;
                background-color: white;
                border-color: lightgray;
                border-radius: 6px;
                border-style: solid;
                animation: OperatorSpin 0.9s infinite ease-in-out alternate;
            }
            .ResultArea {
                display: flex;
                width: 450px;
                height: 50px;
                font-size: 24px;
                align-items: center;
                justify-content: center;
                border: 2px solid lightgray;
                margin:auto;
                border-radius: 6px;
                
            }
            .CalcBuxAmount {
                font-size: 30px;
            }
            .UpgradeButton {
                height: 40px;
                width: 150px;
                font-size: 15px;
            }
            .TopDiv {
                z-index: 2;
                position: absolute;
                width: 500px;
                height: 300px;
                border: 1px solid black;
                border-radius: 8px;
                background-color: white;
                top: 20%;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 5px;
            }
            .UpgradeListButton {
                height: 45px;
                font-size: 15px;
                display: block;
            }
        </style>
    </head>
</html>


<body id="Body">
    <div class="OperatorArea">
        <div class="TopDiv" id="UpgradesArea" style="visibility: hidden;">
            <h1>UPGRADES:</h1>
            <button class="UpgradeListButton" id="GamblePurchaseButton">GAMBLING: 100 CALCBUX</button>
            <button class="UpgradeListButton" id="CloseUpgradesButton">CLOSE</button>
        </div>
    </div>
    <!-- Title -->

    <h1 class="title">
        <span style="--i:1">E</span>
        <span style="--i:2">P</span>
        <span style="--i:3">I</span>
        <span style="--i:4">C</span>
        &nbsp;
        <span style="--i:5">C</span>
        <span style="--i:6">A</span>
        <span style="--i:7">L</span>
        <span style="--i:8">C</span>
        <span style="--i:9">U</span>
        <span style="--i:10">L</span>
        <span style="--i:11">A</span>
        <span style="--i:12">T</span>
        <span style="--i:13">O</span>
        <span style="--i:14">R</span>
    </h1>

    <!-- Result Area -->

    <h1 class="ResultArea" id="ResultArea">hello</h1>

    &nbsp;

    <!-- Text Areas -->

    <div class="TextAreas">
        <textarea type="number" id="firstNumber" class="Num1"></textarea>
        <select name="Operator" class="Operator" id="Operator">
            <option value="+">+</option>
            <option value="-">-</option>
            <option value="*">*</option>
            <option value="/">/</option>
            <option value="?" id="GamblingButton" disabled>?</option>
        </select>
        <textarea type="number" id="secondNumber" class="Num2"></textarea>
    </div>
    &nbsp;

    <!-- Result Button -->

    <div class="OperatorArea">
        <button class="CalcButton" id="CalcButton">Calculate!</button>
    </div>
    &nbsp;
    <!-- Upgrades Button -->
    <div class="TextAreas">
        <button class="UpgradeButton" id="UpgradeButton">UPGRADES</button>
     </div>

    <!-- CalcBux Text -->
    <div class="TextAreas">
        <p class="CalcBuxAmount" id="CalcBux">CalcBux Amount: 5$</p>
    </div>
    <!-- Audio -->
</body>
<script src="https://unpkg.com/gsap@3/dist/MotionPathPlugin.min.js"></script>
<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
<script>
    const CalcButton = document.getElementById("CalcButton");
    const ResultArea = document.getElementById("ResultArea");
    const Body = document.getElementById("Body");
    const CalcBux = document.getElementById("CalcBux")
    const UpgradeButton = document.getElementById("UpgradeButton")
    let CalcBuxAmount = 100;
    let CalcDebounce = false;
    CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
    let GamblingEnabled = false;
    let BaseCalcBuxAmount = 5;
    let Results = []
    let Div0 = false;
    CalcButton.addEventListener("click", function() {

        const firstNumber = document.getElementById("firstNumber");
        const secondNumber = document.getElementById("secondNumber");

        const operator = document.getElementById("Operator").value;
        function AddCalcBux() {
            console.log(firstNumber.value + operator + secondNumber.value)
            if (!Results.includes(firstNumber.value + operator + secondNumber.value)) {
                if (operator === "+") {
                    CalcBuxAmount += BaseCalcBuxAmount
                } else if (operator === "-") {
                    CalcBuxAmount += BaseCalcBuxAmount +2
                } else if (operator === "*") {
                    CalcBuxAmount += BaseCalcBuxAmount + 4
                } else if (operator === "/") {
                    if (Div0) {
                        CalcBuxAmount -= BaseCalcBuxAmount
                        Div0 = false;
                    } else {
                        CalcBuxAmount += BaseCalcBuxAmount + 6
                    }
                }
            } else {
                if (Div0) {
                    CalcBuxAmount -= BaseCalcBuxAmount + 1000
                    Div0 = false;
                }
                CalcBuxAmount += 2
            }
            if (CalcBuxAmount <= 0) {
                CalcBuxAmount = 0
            }
        }

        if (CalcDebounce === false) {
            CalcDebounce = true
            gsap.to(["#CalcButton"], {
                scale: 0.92,
                ease: "power1.inout",
                duration: 0.2
            });
            gsap.to(["#secondNumber", "#firstNumber"], {
                scale: 1.2,
                ease: "power1.inout",
                duration: 0.2
            });
            gsap.to(["#secondNumber", "#firstNumber", "#CalcButton"], {
                scale: 1,
                ease: "bounce.out",
                delay: 0.2
            });
            let result;

            if (operator === "+") {
                result = Number(firstNumber.value) + Number(secondNumber.value);
                ResultArea.textContent = result;


            } else if (operator === "-") {
                result = Number(firstNumber.value) - Number(secondNumber.value);
                ResultArea.textContent = result;


            } else if (operator === "*") {
                result = Number(firstNumber.value) * Number(secondNumber.value);
                ResultArea.textContent = result;


            } else if (operator === "/") {
                result = Number(firstNumber.value) / Number(secondNumber.value);
                if (secondNumber.value === "0") {
                    result = "Are you serious???"
                    Div0 = true;
                }
                ResultArea.textContent = result;



            } else if (operator === "?") {


                if (GamblingEnabled) {
                    function sleep(ms) {
                        return new Promise(resolve => setTimeout(resolve, ms));
                    }

                    let numstomix = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0]
                    const result1 = [...numstomix].sort(() => Math.random() - 0.5);
                    const ChosenNumber = firstNumber.value
                    const MoneyBet = secondNumber.value
                    function sleep(ms) {
                        return new Promise(resolve => setTimeout(resolve, ms));
                    }
                    async function displayNumbers() {
                        for (let i = 0; i < result1.length; i++) {
                            const item1 = result1[i];
                                
                            ResultArea.textContent = `${item1}`;
                                
                            await sleep(50);
                        }
                    }
                    if (MoneyBet <= CalcBuxAmount && MoneyBet > 0 && ChosenNumber <= 9 && ChosenNumber >= 0) {
                        CalcBuxAmount -= MoneyBet
                        displayNumbers()
                        setTimeout(() => {
                            if (Number(ChosenNumber) == ResultArea.textContent) {
                                ResultArea.textContent = "Winner!"
                                CalcBuxAmount += MoneyBet * 2
                            } else {
                                ResultArea.textContent = "Loser!"
                            }
                        }, 900);
                    } else if (MoneyBet > CalcBuxAmount) {
                        ResultArea.textContent = "Not Enough Money!"
                    } else if (ChosenNumber >= 9 || ChosenNumber <= 0) {
                        ResultArea.textContent = "Invalid Number!"
                    } else if (MoneyBet <= 0) {
                        ResultArea.textContent = "You Can't Bet That Amount Of Money!"
                    }
                }


            }
            console.log(Results)
            AddCalcBux()
            Results.push(firstNumber.value + operator + secondNumber.value)
            if (Results.length > 5) {
                Results.shift()
            }
            CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
            setTimeout(() => {
                CalcDebounce = false
                CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
            }, 500);
        }
        
    });
    let EnabledUpgrades = []
    const GamblePurchaseButton = document.getElementById("GamblePurchaseButton");
    const CloseUpgradesButton = document.getElementById("CloseUpgradesButton");
    const UpgradesArea = document.getElementById("UpgradesArea")
    const GamblingButton = document.getElementById("GamblingButton")
        
    GamblePurchaseButton.addEventListener("click", function() {
        if (CalcBuxAmount >= 100) {
            GamblePurchaseButton.disabled = true;
            GamblePurchaseButton.textContent = "Purchased!"
            GamblingButton.disabled = false
            GamblingEnabled = true
            CalcBuxAmount -= 100
            CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
            setTimeout(() => {
                GamblePurchaseButton.textContent = "GAMBLING: 100 CALCBUX"
            }, 900);
        } else {
            GamblePurchaseButton.textContent = "Not Enough Money!"
            GamblePurchaseButton.disabled = true
            setTimeout(() => {
                GamblePurchaseButton.textContent = "GAMBLING: 100 CALCBUX"
                GamblePurchaseButton.disabled = false
            }, 900);
        }
    });

    CloseUpgradesButton.addEventListener("click", function() {
        UpgradesArea.style.visibility = "hidden"
    });
    UpgradeButton.addEventListener("click", function() {
        UpgradesArea.style.visibility = "visible"
    });
</script>
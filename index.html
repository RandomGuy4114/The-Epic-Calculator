<!DOCTYPE html>


<html>
    <head>
        <style>
            :root {
                --main-bg-color: white;
                --main-border-color: lightgray;
                --button-bg-color: white;
                --text-color: black;
                --button-unavailable-color: lightgray;
            }
            @font-face {
                font-family: "Comic Sans";
                src: url("Comic\ Sans\ MS.ttf");
            }

            @keyframes RainbowAnim {
                0% { color: #ff0000; }
                16% { color: #ff7f00; }
                33% { color: #ffff00; }
                50% { color: #00ff00; }
                66% { color: #0000ff; }
                83% { color: #4b0082; }
                100% { color: #8f00ff; }
            }
            @keyframes TitleAnim {
                0% {transform: translateY(0);}
                50% {transform: translateY(-14px);}
            }
            @keyframes OperatorSpin {
                0% {transform: rotate(-10deg);}
                100% {transform: rotate(10deg);}
            }
            @keyframes ResultAnim {
                8% {transform: translateX(-30px) rotate(-5deg);}
            }
            @keyframes ResultAnimRight {
                8% {transform: translateX(30px) rotate(5deg);}
            }


            h1 {
                text-align: center;
                font-family: "Comic Sans";
                color: var(--text-color);
            }
            p {
                font-family: "Comic Sans";
                color: var(--text-color);
            }
            button {
                font-family: "Comic Sans";
                font-size: 24px;
                border-radius: 10px;
                border-style: solid;
                border-color: var(--main-border-color);
                background-color: var(--button-bg-color);
                padding: 10px;
                color: var(--text-color);
            }
            button:disabled {
                background-color: var(--button-unavailable-color);
            }
            .CalcButton {
                width: 200px;
            }
            .Shake {
                animation: shake 0.5s ease-in-out;
            }
            textarea {
                font-family: "Comic Sans";
                resize: none;
                width: 100px;
                height: 100px;
                font-size: 71px;
                border-radius: 10px;
                border-style: solid;
                text-align: center;
                border-color: var(--main-border-color);
                white-space: nowrap;
                background-color: var(--button-bg-color);
                color: var(--text-color);
            }
            .TextAreas {
                text-align: center;
                display: flex;
                justify-content: center;
                
            }
            .Num1anim {
                animation: ResultAnim 1s 1 linear;
            }
            .Num2anim {
                animation: ResultAnimRight 1s 1 linear;
            }
            .OperatorArea {
                text-align: center;
                display: flex;
                justify-content: center;
                color: var(--text-color);
            }

            .title span {
                justify-content: center;
                display: inline-block;
                animation-name: RainbowAnim, TitleAnim;
                animation-duration: 3s, 1.6s;
                animation-iteration-count: infinite, infinite;
                animation-timing-function: ease-in-out, ease-in-out;
                animation-direction: normal, normal;
                animation-delay: calc(0.08s * var(--i));
                font-size: 50px;

            }
            .Operator {
                font-size: 36px;
                margin: 20px;
                display: flex;
                width: 60px;
                height: 60px;
                text-align: center;
                font-family: "Comic Sans";
                appearance: none;
                justify-content: center;
                background-color: var(--button-bg-color);
                border-color: var(--main-border-color);
                border-radius: 6px;
                border-style: solid;
                animation: OperatorSpin 0.9s infinite ease-in-out alternate;
                color: var(--text-color);
            }
            .ResultArea {
                display: flex;
                width: 450px;
                height: 50px;
                font-size: 24px;
                align-items: center;
                justify-content: center;
                border: 2px solid var(--main-border-color);
                margin:auto;
                border-radius: 6px;
                background-color: var(--button-bg-color);
                
            }
            .CalcBuxAmount {
                font-size: 30px;
            }
            .UpgradeButton {
                height: 40px;
                width: 150px;
                font-size: 15px;
            }

            .SettingsButton {
                height: 40px;
                width: 300px;
                font-size: 15px;
                position: fixed;
                bottom: 0;
                padding: 10px 0;
                margin-bottom: 10px;
                font-size: 13px;
            }
            .TopDiv {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 300px;
                height: 500px;
                background: var(--main-bg-color);
                border: 2px solid var(--main-border-color);
                padding: 20px;
                border-radius: 10px;
                z-index: 9999;
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 2px;  
            }

            
            .UpgradeListButton {
                height: 45px;
                font-size: 15px;
                display: block;
            }

        </style>
    </head>
</html>


<body id="Body" style="background-color: var(--main-bg-color);">
    <div class="TopDiv" id="SettingsOverlay" style="visibility: hidden;">
        <h1>SETTINGS:</h1>
        <button class="UpgradeListButton" id="DarkModeButton">DARK MODE</button>
        <button class="SettingsButton" id="CloseSettingsButton" style="width: 320px; color: red;">CLOSE</button>
    </div>



    <div class="OperatorArea">
        <div class="TopDiv" id="UpgradesArea" style="visibility: hidden;">
            <h1>UPGRADES:</h1>
            <button class="UpgradeListButton" id="GamblePurchaseButton">GAMBLING: 100 CALCBUX</button>
            <button class="UpgradeListButton" id="MoneyPurchaseButton">2X MORE MONEY: 200 CALCBUX</button>
            <button class="SettingsButton" id="CloseUpgradesButton"style="width: 320px; color: red;">CLOSE</button>
        </div>
    </div>
    <!-- Title -->

    <h1 class="title">
        <span style="--i:1">E</span>
        <span style="--i:2">P</span>
        <span style="--i:3">I</span>
        <span style="--i:4">C</span>
        &nbsp;
        <span style="--i:5">C</span>
        <span style="--i:6">A</span>
        <span style="--i:7">L</span>
        <span style="--i:8">C</span>
        <span style="--i:9">U</span>
        <span style="--i:10">L</span>
        <span style="--i:11">A</span>
        <span style="--i:12">T</span>
        <span style="--i:13">O</span>
        <span style="--i:14">R</span>
    </h1> <!-- This may look as inefficient as shit, and you're right, it is. -->

    <!-- Result Area -->

    <h1 class="ResultArea" id="ResultArea">v2.3</h1>

    &nbsp;

    <!-- Text Areas -->

    <div class="TextAreas">
        <textarea type="number" id="firstNumber" class="Num1"></textarea>
        <select name="Operator" class="Operator" id="Operator">
            <option value="+">+</option>
            <option value="-">-</option>
            <option value="*">*</option>
            <option value="/">/</option>
            <option value="?" id="GamblingButton" disabled>?</option>
        </select>
        <textarea type="number" id="secondNumber" class="Num2"></textarea>
    </div>
    &nbsp;

    <!-- Result Button -->

    <div class="OperatorArea">
        <button class="CalcButton" id="CalcButton">Calculate!</button>
    </div>
    &nbsp;
    <!-- Upgrades Button -->
    <div class="TextAreas">
        <button class="UpgradeButton" id="UpgradeButton">UPGRADES</button>
     </div>
    <!-- CalcBux Text -->
    <div class="TextAreas">
        <p class="CalcBuxAmount" id="CalcBux">CalcBux Amount: 5$</p>
    </div>
    <!--Settings Button-->
    <div class="TextAreas">
        <button class="SettingsButton" id="SettingsButton">SETTINGS</button>
    </div>
    <!-- Audio -->
</body>

<script src="https://unpkg.com/gsap@3/dist/MotionPathPlugin.min.js"></script>
<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
<script>
    const CalcButton = document.getElementById("CalcButton");
    const ResultArea = document.getElementById("ResultArea");
    const Body = document.getElementById("Body");
    const CalcBux = document.getElementById("CalcBux")
    const UpgradeButton = document.getElementById("UpgradeButton")
    let CalcBuxAmount = 100;
    let CalcDebounce = false;
    CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
    let EnabledUpgrades = []
    let BaseCalcBuxAmount = 5;
    let Results = []
    let Div0 = false;
    let GameSave = true;
    const SAVE_KEY = "Epic_Calc_Save_Lol"
    function SUPERSECRETDEVELOPERMODE() {
        console.log("SUPER SECRET DEVELOPER MODE ACTIVATED!! (your progress wont save until you reload the website)")
        saveGame()
        GameSave = false;
        CalcBuxAmount = 90823478903498432790342878923479843270984238239478902340
        CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
    }
    function resetCalculator() {
        CalcBuxAmount = 100;
        BaseCalcBuxAmount = 5;
        Results = [];
        EnabledUpgrades = [];

        CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`;
        GamblePurchaseButton.disabled = false;
        GamblePurchaseButton.textContent = "GAMBLING: 100 CALCBUX";

        localStorage.removeItem(SAVE_KEY)

        console.log("look at what you did, you destroyed everything... YOU MONSTER!")
    }

    function getSaveData() {
        return {
            CalcBuxAmount,
            BaseCalcBuxAmount,
            Results,
            EnabledUpgrades
        }
    }

    function applySaveData(data) {
        CalcBuxAmount = data.CalcBuxAmount ?? 100;
        EnabledUpgrades = data.EnabledUpgrades ?? [];
        BaseCalcBuxAmount = data.BaseCalcBuxAmount ?? false;
        Results = data.Results ?? [];

        CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`;

        if (EnabledUpgrades.includes("Gambling")) {
            GamblingButton.disabled = false;
            GamblePurchaseButton.disabled = true;
        }
        if (EnabledUpgrades.includes("2XMoreMoney")) {
            MoneyPurchaseButton.disabled = false;
            MoneyPurchaseButton.disabled = true;
        }
    }

    function saveGame() {
        localStorage.setItem(
            SAVE_KEY,
            JSON.stringify(getSaveData())
        )
    }

    CalcButton.addEventListener("click", function() {
        const firstNumber = document.getElementById("firstNumber");
        const secondNumber = document.getElementById("secondNumber");

        const operator = document.getElementById("Operator").value;
        function AddCalcBux() {
            let earned = 0;
            console.log(firstNumber.value + operator + secondNumber.value)
            if (!Results.includes(firstNumber.value + operator + secondNumber.value)) {
                if (operator === "+") {
                    earned += BaseCalcBuxAmount
                } else if (operator === "-") {
                    earned += BaseCalcBuxAmount +2
                } else if (operator === "*") {
                    earned = BaseCalcBuxAmount + 4
                } else if (operator === "/") {
                    if (Div0) {
                        earned -= BaseCalcBuxAmount
                        Div0 = false;
                    } else {
                        earned += BaseCalcBuxAmount + 6
                    }
                }
            } else {
                if (Div0) {
                    CalcBuxAmount -= BaseCalcBuxAmount
                    Div0 = false;
                }
                earned += 2
            }

            if (EnabledUpgrades.includes("2XMoreMoney")) {
                earned *= 2
            }

            CalcBuxAmount += earned
            
            if (CalcBuxAmount <= 0) {
                CalcBuxAmount = 0
            }
        }

        if (CalcDebounce === false) {
            CalcDebounce = true
            gsap.to(["#CalcButton"], {
                scale: 0.92,
                ease: "power1.inout",
                duration: 0.2
            });
            gsap.to(["#secondNumber", "#firstNumber"], {
                scale: 1.2,
                ease: "power1.inout",
                duration: 0.2
            });
            gsap.to(["#secondNumber", "#firstNumber", "#CalcButton"], {
                scale: 1,
                ease: "bounce.out",
                delay: 0.2
            });
            let result;

            if (operator === "+") {
                result = Number(firstNumber.value) + Number(secondNumber.value);
                ResultArea.textContent = result;
            } else if (operator === "-") {
                result = Number(firstNumber.value) - Number(secondNumber.value);
                ResultArea.textContent = result;


            } else if (operator === "*") {
                result = Number(firstNumber.value) * Number(secondNumber.value);
                ResultArea.textContent = result;


            } else if (operator === "/") {
                result = Number(firstNumber.value) / Number(secondNumber.value);
                if (secondNumber.value === "0") {
                    result = "Are you serious???"
                    Div0 = true;
                }
                ResultArea.textContent = result;



            } else if (operator === "?") {


                if (EnabledUpgrades.includes("Gambling")) {
                    function sleep(ms) {
                        return new Promise(resolve => setTimeout(resolve, ms));
                    }

                    let numstomix = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0]
                    const result1 = [...numstomix].sort(() => Math.random() - 0.5);
                    const ChosenNumber = firstNumber.value
                    const MoneyBet = secondNumber.value
                    function sleep(ms) {
                        return new Promise(resolve => setTimeout(resolve, ms));
                    }
                    async function displayNumbers() {
                        for (let i = 0; i < result1.length; i++) {
                            const item1 = result1[i];
                                
                            ResultArea.textContent = `${item1}`;
                                
                            await sleep(50);
                        }
                    }
                    if (MoneyBet <= CalcBuxAmount && MoneyBet > 0 && ChosenNumber <= 9 && ChosenNumber >= 0) {
                        CalcBuxAmount -= MoneyBet
                        displayNumbers()
                        setTimeout(() => {
                            if (Number(ChosenNumber) == ResultArea.textContent) {
                                ResultArea.textContent = "Winner!"
                                CalcBuxAmount += MoneyBet * 2
                                CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
                            } else {
                                ResultArea.textContent = "Loser!"
                            }
                        }, 900);
                    } else if (MoneyBet > CalcBuxAmount) {
                        ResultArea.textContent = "Not Enough Money!"
                    } else if (ChosenNumber > 9 || ChosenNumber <= 0) {
                        ResultArea.textContent = "Invalid Number!"
                    } else if (MoneyBet < 0) {
                        ResultArea.textContent = "You Can't Bet That Amount Of Money!"
                    }
                }


            }
            console.log(Results)
            AddCalcBux()
            Results.push(firstNumber.value + operator + secondNumber.value)
            if (Results.length > 5) {
                Results.shift()
            }
            CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
            setTimeout(() => {
                CalcDebounce = false
                CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
            }, 500);
        }
        
    });
    const GamblePurchaseButton = document.getElementById("GamblePurchaseButton");
    const CloseUpgradesButton = document.getElementById("CloseUpgradesButton");
    const UpgradesArea = document.getElementById("UpgradesArea")
    const GamblingButton = document.getElementById("GamblingButton")
    const MoneyPurchaseButton = document.getElementById("MoneyPurchaseButton")
        
    GamblePurchaseButton.addEventListener("click", function() {
        if (CalcBuxAmount >= 100) {
            GamblePurchaseButton.disabled = true;
            GamblePurchaseButton.textContent = "Purchased!"
            GamblingButton.disabled = false
            EnabledUpgrades.push("Gambling")
            CalcBuxAmount -= 100
            CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
            setTimeout(() => {
                GamblePurchaseButton.textContent = "GAMBLING: 100 CALCBUX"
            }, 900);
        } else {
            GamblePurchaseButton.textContent = "Not Enough Money!"
            GamblePurchaseButton.disabled = true
            setTimeout(() => {
                GamblePurchaseButton.textContent = "GAMBLING: 100 CALCBUX"
                GamblePurchaseButton.disabled = false
            }, 900);
        }
    });

    MoneyPurchaseButton.addEventListener("click", function() {
        if (CalcBuxAmount >= 200) {
            MoneyPurchaseButton.disabled = true;
            MoneyPurchaseButton.textContent = "Purchased!"
            EnabledUpgrades.push("2XMoreMoney")
            CalcBuxAmount -= 200
            CalcBux.textContent = `CalcBux Amount: ${CalcBuxAmount}$`
            setTimeout(() => {
                MoneyPurchaseButton.textContent = "2X MORE MONEY: 200 CALCBUX"
            }, 900);
        } else {
            MoneyPurchaseButton.textContent = "Not Enough Money!"
            MoneyPurchaseButton.disabled = true
            setTimeout(() => {
                MoneyPurchaseButton.textContent = "2X MORE MONEY: 200 CALCBUX"
                MoneyPurchaseButton.disabled = false
            }, 900);
        }
    });


    CloseUpgradesButton.addEventListener("click", function() {
        UpgradesArea.style.visibility = "hidden"
    });
    UpgradeButton.addEventListener("click", function() {
        UpgradesArea.style.visibility = "visible"
    });


    (function initSave() {
        const raw = localStorage.getItem(SAVE_KEY);
        if (!raw) return;

        try {
            applySaveData(JSON.parse(raw));

        } catch {
            console.warn("Save load failed :(")
        }
    })();
    window.addEventListener("beforeunload", () => {
        if (GameSave) {
            saveGame()
        }
    });
    
    const SettingsButton = document.getElementById("SettingsButton");
    const CloseSettingsButton = document.getElementById("CloseSettingsButton");
    const DarkModeButton = document.getElementById("DarkModeButton");
    SettingsButton.addEventListener("click", function() {
        const SettingsOverlay = document.getElementById("SettingsOverlay");
        SettingsOverlay.style.visibility = "visible"
    });
    CloseSettingsButton.addEventListener("click", function() {
        const SettingsOverlay = document.getElementById("SettingsOverlay");
        SettingsOverlay.style.visibility = "hidden"
    });
    DarkModeButton.addEventListener("click", function() {
        if (Body.style.backgroundColor === "var(--main-bg-color)") {
            Body.style.backgroundColor = "#121212";
            Body.style.setProperty("--main-bg-color", "#121212");
            Body.style.setProperty("--main-border-color", "#1e1e1e");
            Body.style.setProperty("--button-bg-color", "#1e1e1e");
            Body.style.setProperty("--text-color", "white");
            Body.style.setProperty("--button-unavailable-color", "#2c2c2c");
        } else {
            Body.style.backgroundColor = "var(--main-bg-color)";
            Body.style.setProperty("--main-bg-color", "white");
            Body.style.setProperty("--main-border-color", "lightgray");
            Body.style.setProperty("--button-bg-color", "white");
            Body.style.setProperty("--text-color", "black");
            Body.style.setProperty("--button-unavailable-color", "lightgray");
        }
    });


    console.log(getSaveData())
    console.log("Hey you! Get the fuck out of my console! >:(")
</script>